import tkinter as tk
import psycopg2
from datetime import datetime

class JournalEntriesGUI(tk.Frame):
    def __init__(self, master=None):
        super().__init__(master)
        self.master = master
        self.master.title("Journal Entries")
        self.pack()
        self.create_widgets()

    def create_widgets(self):
        # Create labels and input boxes for the entry form
        title_label = tk.Label(self, text="Title:")
        title_label.grid(row=0, column=0)
        self.title_box = tk.Entry(self)
        self.title_box.grid(row=0, column=1)

        dreams_label = tk.Label(self, text="Dreams:")
        dreams_label.grid(row=1, column=0)
        self.dreams_box = tk.Text(self, height=5, width=50)
        self.dreams_box.grid(row=1, column=1)

        thoughts_label = tk.Label(self, text="Thoughts:")
        thoughts_label.grid(row=2, column=0)
        self.thoughts_box = tk.Text(self, height=5, width=50)
        self.thoughts_box.grid(row=2, column=1)

        positive_label = tk.Label(self, text="Positive:")
        positive_label.grid(row=3, column=0)
        self.positive_box = tk.Text(self, height=5, width=50)
        self.positive_box.grid(row=3, column=1)

        one_thing_label = tk.Label(self, text="One Thing:")
        one_thing_label.grid(row=4, column=0)
        self.one_thing_box = tk.Text(self, height=5, width=50)
        self.one_thing_box.grid(row=4, column=1)

        # Create a button to submit the form
        submit_button = tk.Button(self, text="Submit", command=self.insert_entry)
        submit_button.grid(row=5, column=1)

    def insert_entry(self):
        # Retrieve values from input boxes
        title = self.title_box.get()
        dreams = self.dreams_box.get("1.0", tk.END)
        thoughts = self.thoughts_box.get("1.0", tk.END)
        positive = self.positive_box.get("1.0", tk.END)
        one_thing = self.one_thing_box.get("1.0", tk.END)

        # Insert entry into database
        conn = psycopg2.connect(database="journal_entries", 
                                user="postgres", 
                                password="yourpassword")
        cur = conn.cursor()
        cur.execute("INSERT INTO entries (title, dreams, thoughts, positive, one_thing, created_at) VALUES (%s, %s, %s, %s, %s, %s)",
                    (title, dreams, thoughts, positive, one_thing, datetime.now()))
        conn.commit()
        conn.close()

        # Clear input boxes
        self.title_box.delete(0, tk.END)
        self.dreams_box.delete("1.0", tk.END)
        self.thoughts_box.delete("1.0", tk.END)
        self.positive_box.delete("1.0", tk.END)
        self.one_thing_box.delete("1.0", tk.END)

        # Print confirmation message
        print("Entry added to database.")

root = tk.Tk()
app = JournalEntriesGUI(master=root)
app.mainloop()


